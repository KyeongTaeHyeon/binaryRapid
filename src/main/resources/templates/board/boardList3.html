<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RaFeed</title>
    <link rel="stylesheet" th:href="@{/css/reset.css}" />
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/boardList.css}" />
</head>
<body>
<div id="wrapper">
    <header id="header" th:replace="~{fragments/header :: header}"></header>

    <main id="main">
        <div id="boardcreat" class="outline">
            <div class="title"><h1>식당신청</h1></div>
            <div class="filter">
                <a href=""><span>전체</span></a>
                <a href=""><span>자유게시판</span></a>
                <a href=""><span>식당인증</span></a>
                <a href="" class="active"><span>식당신청</span></a>
            </div>
            <div class="store-form">
                <form id="restaurantApplyForm" action="#" method="post">
                    <div class="form-row">
                        <label for="name">상호명</label>
                        <input type="text" id="name" name="name" />
                    </div>
                    <div class="form-row">
                        <label for="address">주소</label>
                        <input type="text" id="address" name="address" />
                    </div>
                    <div class="form-row">
                        <label for="category1">지역</label>
                        <select id="category1" name="category1">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category2">카테고리</label>
                        <select id="category2" name="category2">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category3">형태</label>
                        <select id="category3" name="category3">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category4">두께</label>
                        <select id="category4" name="category4">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category5">계열</label>
                        <select id="category5" name="category5">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category6">종류</label>
                        <select id="category6" name="category6">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category7">기름기</label>
                        <select id="category7" name="category7">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="category8">농도</label>
                        <select id="category8" name="category8">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="form-button">
                        <button type="submit">신청</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer id="footer" th:replace="~{fragments/footer :: footer}"></footer>
</div>

<script th:src="@{/js/common.js}"></script>
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement(
            { pageLanguage: 'ko', includedLanguages: 'en,ja,zh-CN,ko' },
            'google_translate_element'
        );
    }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script th:src="@{/js/boardList.js}"></script>

<script>
    document.addEventListener("DOMContentLoaded", async function () {
        try {
            // 1. 서버 API 호출
            const response = await fetch("/api/category/map");
            if (!response.ok) throw new Error("네트워크 응답 에러");
            const categoryMap = await response.json();

            // 2. HTML ID와 서버 groupId 매핑
            const config = {
                "category1": "region",    "category2": "category",
                "category3": "shape",     "category4": "thickness",
                "category5": "style",     "category6": "kind",
                "category7": "rich",      "category8": "richness"
            };

            // 3. Select 박스 채우기
            Object.entries(config).forEach(([selectId, groupId]) => {
                const selectElement = document.getElementById(selectId);
                const items = categoryMap[groupId];

                if (selectElement && items) {
                    items.forEach(item => {
                        const option = document.createElement("option");
                        option.value = item.id;
                        option.textContent = item.name;
                        selectElement.appendChild(option);
                    });
                }
            });
        } catch (error) {
            console.error("데이터 로드 실패:", error);
        }
    });
</script>
</body>
</html>