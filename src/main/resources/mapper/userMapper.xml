<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.binary.rapid.user.mapper.UserMapper">

    <!-- 회원가입 -->
    <insert id="insertUser"
            parameterType="com.binary.rapid.user.dto.UserDto"
            useGeneratedKeys="true"
            keyProperty="userId"
            keyColumn="user_id">
        INSERT INTO tb_user (
        id, password, nickname, name, taste,
        birth, email, social, gender, role
        )
        VALUES (
        #{id},
        #{password},
        #{nickName},
        #{name},
        #{taste},
        #{birth},
        #{email},
        #{social},
        #{gender},
        #{role}
        )
    </insert>

    <!-- 아이디 중복 체크 -->
    <select id="duplicateUserId"
            parameterType="string"
            resultType="int">
        SELECT COUNT(*) FROM tb_user WHERE id = #{id}
    </select>

    <!-- 아이디로 유저 조회 -->
    <select id="selectUserId"
            parameterType="string"
            resultType="com.binary.rapid.user.dto.UserResponseDto">
        SELECT *
        FROM tb_user
        WHERE id = #{id}
    </select>

    <!-- 유저 id로 게시글 리스트 전체 조회 -->
    <select id="selectBoardsByUserId" parameterType="int"
            resultType="boardDto">
        SELECT
        *
        FROM tb_board
        WHERE user_id = #{id}
        AND delete_date IS NULL
        ORDER BY create_date DESC
    </select>
</mapper>
